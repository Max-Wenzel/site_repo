<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title><%=title%></title>
    <meta name="generator" content="Bootply" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="css/styles.css" rel="stylesheet">
  </head>
  <body>
<header class="navbar navbar-bright navbar-fixed-top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">Home</a>
    </div>
    <nav class="collapse navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <%for (let i=0; i<nav.length; i++) {%>
          <li>
            <a href="<%=nav[i].link%>"><%=nav[i].title%></a>
          </li>
        <%}%>
      </ul>
    </nav>
  </div>
</header>

<div id="masthead">
  <div class="container">
    <div class="row">
      <div class="col-md-7">
        <h1><%=title%>
          <p class="lead"></p>
        </h1>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <div class="panel">
        <div class="panel-body">

          <!-- HEADER START -->
          <div class="row">
              <br>
              <div class="col-md-10 col-sm-9">

              <!-- Display Clock -->
              <div id="ClockDisplay"></div>
              <script type="text/javascript">
                function showTime() {
                  var date = new Date();
                  var h = date.getHours();
                  var m = date.getMinutes();
                  var s = date.getSeconds();
                  var session = "AM";
                  if(h == 0){
                    h = 12;
                  }
                  if(h > 12){
                    h = h - 12;
                    session = "PM";
                  }
                  h = (h < 10) ? "0" + h : h;
                  m = (m < 10) ? "0" + m : m;
                  s = (s < 10) ? "0" + s : s;
                  var time = h+":"+m+":"+s+" "+session;
                  document.getElementById("ClockDisplay").innerText = time;
                  document.getElementById("ClockDisplay").textContent = time;
                  setTimeout(showTime, 1000);
                }
                showTime();
              </script>

                <h2>
                  <u>Current Office Hours</u>
                </h2>
                <div class="row">
                  <div class="col-xs-9">
                    <h4>
                        Shown are Teacher Assistants that are holding office hours either currently or within the day. Consult the my courses tab to find all TA and professor office hours for your specific class!
                    </h4>
                  </div>
                  <div class="col-xs-3"></div>
                </div>
                <br>
              </div>
          </div>
          <hr>
          <br>
          <!-- HEADER END -->

          <!-- SHOW TA's START-->
          <!-- This is going to loop over dashboard to recreate the home page except it will  be the list of dashboard -->
          <!-- the ejs and html syntax might confuse your text editor, but the below code works. -->
          <%for (let i=0; i<dashboard.length; i++) {%>                 <% var d = new Date();
                 var day = d.getDay();
                var hour = String(d.getHours());
                 var minute = String(d.getMinutes());
                 if(minute.length == 1){
                    minute = '0'+minute;
                  }
                 var hour = hour + '.' + minute;
                 var hour = Number(hour);
                 if(day == 1){
                    var begin = dashboard[i].MondayS;
                    var end = dashboard[i].MondayE;
                   var spot = dashboard[i].Mlocation;
                  }
                if(day == 2){
                    var begin = dashboard[i].TuesdayS;
                    var end = dashboard[i].TuesdayE;
                    var spot = dashboard[i].Tlocation;
                  }
                 if(day == 3){
                    var begin = dashboard[i].WednesdayS;
                    var end = dashboard[i].WednesdayE;
                    var spot = dashboard[i].Wlocation;
                  }
                 if(day == 4){
                    var begin = dashboard[i].ThursdayS;
                    var end = dashboard[i].ThursdayE;
                    var spot = dashboard[i].THlocation;
                  }
                  if(day == 5){
                    var begin = dashboard[i].FridayS;
                    var end = dashboard[i].FridayE;
                    var spot = dashboard[i].Flocation;
                  }
                 if((begin <= hour) && (end >= hour)){%>
            <div class="row">
              <div class="col-md-2 col-sm-3 text-center">
                  <% if( (i == 0) || (dashboard[i].class != dashboard[i-1].class) ) { %>
                      <a class="story-title" href="#">
                      <img alt="" src="http://tachyondecay.net/images/blog/fb_performance.png"
                      style="width:100px;height:100px" class="img-circle">
                      <!-- here show the ta's Image -->
                  <%}%>
                </a>
              </div>
              <div class="col-md-10 col-sm-9">
                <% if( (i == 0) || (dashboard[i].class != dashboard[i-1].class) ) { %>
                    <h3><%=dashboard[i].class%></h3>
                <%}%>
                <div class="row">
                  <div class="col-xs-9">
                    <h3>
                      <span class="label label-default"><%=dashboard[i].full_name%></span></h4><h4>
                    </h3>
                      <% var d=new Date(); var day=d.getDay(); var hour=d.getHours(); 
                      if(day == 1){ if(dashboard[i].MondayE>hour){ if(dashboard[i].MondayS<hour){ %>
                        <table><tr>
                          <td><h4>In session:&nbsp;<%=dashboard[i].MondayS%></h4></td>
                          <td><h4> - </h4></td>
                          <td><h4><%=dashboard[i].MondayE%><b>&nbsp;<%=dashboard[i].Mlocation%></b></h4></td>
                        </tr></table>
                      <% } else { %>
                          <table><tr>
                            <td><h4>Upcoming:&nbsp;<%=dashboard[i].MondayS%></h4></td>
                            <td><h4> - </h4></td>
                            <td><h4><%=dashboard[i].MondayE%><b>&nbsp;<%=dashboard[i].Mlocation%></b></h4></td>
                          </tr></table>
                      <%}%><%}%><%}%>
                      <% var d=new Date(); var day=d.getDay(); var end=d.getHours(); 
                      if(day == 2){ if(dashboard[i].TuesdayE>hour){ if(dashboard[i].TuesdayS<hour){ %>
                        <table><tr>
                          <td><h4>In session:&nbsp;<%=dashboard[i].TuesdayS%></h4></td>
                          <td><h4> - </h4></td>
                          <td><h4><%=dashboard[i].TuesdayE%><b>&nbsp;<%=dashboard[i].Tlocation%></b></h4></td>
                        </tr></table>
                      <% } else { %>
                        <table><tr>
                          <td><h4>Upcoming:&nbsp;<%=dashboard[i].MondayS%></h4></td>
                          <td><h4> - </h4></td>
                          <td><h4><%=dashboard[i].MondayE%><b>&nbsp;<%=dashboard[i].Mlocation%></b></h4></td>
                        </tr></table>
                      <%}%><%}%><%}%>
                      <% var d=new Date(); var day=d.getDay(); var end=d.getHours(); 
                      if(day == 3){ if(dashboard[i].WednesdayE>hour){ if(dashboard[i].WednesdayS<hour){ %>
                        <table><tr>
                          <td><h4>In session:&nbsp;<%=dashboard[i].WednesdayS%></h4></td>
                          <td><h4> - </h4></td>
                         <td><h4><%=dashboard[i].WednesdayE%><b>&nbsp;<%=dashboard[i].Wlocation%></b></h4></td>
                        </tr></table>
                      <% } else { %>
                          <table><tr>
                          <td><h4>Upcoming:&nbsp;<%=dashboard[i].MondayS%></h4></td>
                          <td><h4> - </h4></td>
                          <td><h4><%=dashboard[i].MondayE%><b>&nbsp;<%=dashboard[i].Mlocation%></b></h4></td>
                        </tr></table>
                      <%}%><%}%><%}%>
                      <% var d=new Date(); var day=d.getDay(); var end=d.getHours(); 
                      if(day == 4){ if(dashboard[i].ThursdayE>hour){ if(dashboard[i].ThursdayS<hour){ %>
                        <table><tr>
                          <td><h4>In session:&nbsp;<%=dashboard[i].ThursdayS%></h4></td>
                          <td><h4> - </h4></td>
                         <td><h4><%=dashboard[i].ThursdayE%><b>&nbsp;<%=dashboard[i].THlocation%></b></h4></td>
                        </tr></table>
                      <% } else { %>
                        <table><tr>
                          <td><h4>Upcoming:&nbsp;<%=dashboard[i].MondayS%></h4></td>
                          <td><h4> - </h4></td>
                          <td><h4><%=dashboard[i].MondayE%><b>&nbsp;<%=dashboard[i].Mlocation%></b></h4></td>
                        </tr></table>
                      <%}%><%}%><%}%>
                      <% var d=new Date(); var day=d.getDay(); var end=d.getHours(); 
                      if(day == 5){ if(dashboard[i].FridayE > hour){ if(dashboard[i].FridayS<hour){ %>
                        <table><tr>
                          <td><h4>In session:&nbsp;<%=dashboard[i].FridayS%></h4></td>
                          <td><h4> - </h4></td>
                          <td><h4><%=dashboard[i].FridayE%><b>&nbsp;<%=dashboard[i].Flocation%></b></h4></td>
                        </tr></table>
                      <% } else { %>
                        <table><tr>
                          <td><h4>Upcoming:&nbsp;<%=dashboard[i].MondayS%></h4></td>
                          <td><h4> - </h4></td>
                          <td><h4><%=dashboard[i].MondayE%><b>&nbsp;<%=dashboard[i].Mlocation%></b></h4></td>
                        </tr></table>
                      <%}%><%}%><%}%>
                  </div>
                  <div class="col-xs-3"></div>
                </div>
                <br>
              </div>
            </div>
            <hr><br> <!-- divider -->
          <%}%> <!-- end of current office hours -->
          <%}%>
          <!--/show TA's END-->
        </div>
      </div>
    </div><!--/col-12-->
  </div>
</div>
<hr>
<hr>
<footer>
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
        <ul class="list-inline">
          <li>A project created for CSCI 3308 at CU-Boulder- Spring 2018</li>
        </ul>
      </div>
    </div>
  </div>
</footer>
  <!-- script references -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>